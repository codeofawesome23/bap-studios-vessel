{% doc %}
  @prompt
    A contact form that has 3 rows
    
    First Row has the fields "First Name" and "Last Name". Both are single line text fields and required. On mobile, the fields are stacked on top of each-other into new rows. 
    
    Second Row has the field "Email" which is a single line text field and is a required field.
    
    Third Row has the field "Return/Exchange" which is a single select field with the options "Return" and "Exchange". This field is required and the default option is "Select an option"
    
    Fourth Row has the field "Reason for Return/Exchange" which is a multi-line text box. This field is required.
    
    The styling should mimic the styling for the Contact Form and for the post submit option should send an email of the results to "admin@bapstudios.com".

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-contact-form-{{ ai_gen_id }} {
    max-width: 600px;
    margin: 0 auto;
    padding: 40px 20px;
  }

  .ai-contact-form__wrapper-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  .ai-contact-form__heading-{{ ai_gen_id }} {
    color: {{ block.settings.text_color }};
    margin: 0 0 32px;
    font-size: {{ block.settings.heading_size }}px;
    text-align: center;
  }

  .ai-contact-form__row-{{ ai_gen_id }} {
    display: flex;
    gap: 16px;
    width: 100%;
  }

  .ai-contact-form__row-{{ ai_gen_id }}--single {
    flex-direction: column;
  }

  .ai-contact-form__field-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    flex: 1;
    gap: 8px;
  }

  .ai-contact-form__label-{{ ai_gen_id }} {
    color: {{ block.settings.text_color }};
    font-size: {{ block.settings.label_size }}px;
    font-weight: 500;
  }

  .ai-contact-form__input-{{ ai_gen_id }},
  .ai-contact-form__select-{{ ai_gen_id }},
  .ai-contact-form__textarea-{{ ai_gen_id }} {
    padding: 12px 16px;
    border: {{ block.settings.input_border_width }}px solid {{ block.settings.input_border_color }};
    border-radius: {{ block.settings.input_border_radius }}px;
    background-color: {{ block.settings.input_background }};
    color: {{ block.settings.input_text_color }};
    font-size: 14px;
    transition: border-color 0.3s ease;
  }

  .ai-contact-form__input-{{ ai_gen_id }}:focus,
  .ai-contact-form__select-{{ ai_gen_id }}:focus,
  .ai-contact-form__textarea-{{ ai_gen_id }}:focus {
    outline: none;
    border-color: {{ block.settings.input_focus_border_color }};
    background-color: {{ block.settings.input_hover_background }};
  }

  .ai-contact-form__textarea-{{ ai_gen_id }} {
    min-height: 120px;
    resize: vertical;
    font-family: inherit;
  }

  .ai-contact-form__select-{{ ai_gen_id }} {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 16px;
    padding-right: 40px;
  }

  .ai-contact-form__button-{{ ai_gen_id }} {
    padding: 16px 32px;
    background-color: {{ block.settings.button_color }};
    color: {{ block.settings.button_text_color }};
    border: none;
    border-radius: {{ block.settings.button_border_radius }}px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
    align-self: flex-start;
  }

  .ai-contact-form__button-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.button_hover_color }};
  }

  .ai-contact-form__success-{{ ai_gen_id }} {
    color: {{ block.settings.success_color }};
    background-color: {{ block.settings.success_background }};
    padding: 16px;
    border-radius: {{ block.settings.input_border_radius }}px;
    margin-top: 16px;
    text-align: center;
  }

  .ai-contact-form__error-{{ ai_gen_id }} {
    color: {{ block.settings.error_color }};
    background-color: {{ block.settings.error_background }};
    padding: 16px;
    border-radius: {{ block.settings.input_border_radius }}px;
    margin-top: 16px;
    text-align: center;
  }

  .ai-contact-form__field-error-{{ ai_gen_id }} {
    color: {{ block.settings.error_color }};
    font-size: 12px;
    margin-top: 4px;
  }

  @media screen and (max-width: 749px) {
    .ai-contact-form__row-{{ ai_gen_id }} {
      flex-direction: column;
      gap: 24px;
    }

    .ai-contact-form__button-{{ ai_gen_id }} {
      align-self: stretch;
    }
  }
{% endstyle %}

<div class="ai-contact-form-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {%- if block.settings.heading != blank -%}
    <h2 class="ai-contact-form__heading-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
  {%- endif -%}

  {%- form 'contact', id: 'ai-contact-form-' | append: ai_gen_id -%}
    <input type="hidden" name="contact[email_to]" value="admin@bapstudios.com">
    <input type="hidden" name="contact[subject]" value="Return/Exchange Request">

    <div class="ai-contact-form__wrapper-{{ ai_gen_id }}">
      <div class="ai-contact-form__row-{{ ai_gen_id }}">
        <div class="ai-contact-form__field-{{ ai_gen_id }}">
          <label for="ai-first-name-{{ ai_gen_id }}" class="ai-contact-form__label-{{ ai_gen_id }}">
            First Name *
          </label>
          <input
            type="text"
            id="ai-first-name-{{ ai_gen_id }}"
            name="contact[first_name]"
            class="ai-contact-form__input-{{ ai_gen_id }}"
            value="{{ form.first_name }}"
            required
            {% if form.errors contains 'first_name' %}
              aria-invalid="true"
              aria-describedby="ai-first-name-error-{{ ai_gen_id }}"
            {% endif %}
          >
          {%- if form.errors contains 'first_name' -%}
            <div id="ai-first-name-error-{{ ai_gen_id }}" class="ai-contact-form__field-error-{{ ai_gen_id }}">
              First name is required
            </div>
          {%- endif -%}
        </div>

        <div class="ai-contact-form__field-{{ ai_gen_id }}">
          <label for="ai-last-name-{{ ai_gen_id }}" class="ai-contact-form__label-{{ ai_gen_id }}">
            Last Name *
          </label>
          <input
            type="text"
            id="ai-last-name-{{ ai_gen_id }}"
            name="contact[last_name]"
            class="ai-contact-form__input-{{ ai_gen_id }}"
            value="{{ form.last_name }}"
            required
            {% if form.errors contains 'last_name' %}
              aria-invalid="true"
              aria-describedby="ai-last-name-error-{{ ai_gen_id }}"
            {% endif %}
          >
          {%- if form.errors contains 'last_name' -%}
            <div id="ai-last-name-error-{{ ai_gen_id }}" class="ai-contact-form__field-error-{{ ai_gen_id }}">
              Last name is required
            </div>
          {%- endif -%}
        </div>
      </div>

      <div class="ai-contact-form__row-{{ ai_gen_id }} ai-contact-form__row-{{ ai_gen_id }}--single">
        <div class="ai-contact-form__field-{{ ai_gen_id }}">
          <label for="ai-email-{{ ai_gen_id }}" class="ai-contact-form__label-{{ ai_gen_id }}">
            Email *
          </label>
          <input
            type="email"
            id="ai-email-{{ ai_gen_id }}"
            name="contact[email]"
            class="ai-contact-form__input-{{ ai_gen_id }}"
            value="{{ form.email }}"
            required
            autocomplete="email"
            {% if form.errors contains 'email' %}
              aria-invalid="true"
              aria-describedby="ai-email-error-{{ ai_gen_id }}"
            {% endif %}
          >
          {%- if form.errors contains 'email' -%}
            <div id="ai-email-error-{{ ai_gen_id }}" class="ai-contact-form__field-error-{{ ai_gen_id }}">
              {{ form.errors.messages.email }}
            </div>
          {%- endif -%}
        </div>
      </div>

      <div class="ai-contact-form__row-{{ ai_gen_id }} ai-contact-form__row-{{ ai_gen_id }}--single">
        <div class="ai-contact-form__field-{{ ai_gen_id }}">
          <label for="ai-return-exchange-{{ ai_gen_id }}" class="ai-contact-form__label-{{ ai_gen_id }}">
            Return/Exchange *
          </label>
          <select
            id="ai-return-exchange-{{ ai_gen_id }}"
            name="contact[return_exchange_type]"
            class="ai-contact-form__select-{{ ai_gen_id }}"
            required
            {% if form.errors contains 'return_exchange_type' %}
              aria-invalid="true"
              aria-describedby="ai-return-exchange-error-{{ ai_gen_id }}"
            {% endif %}
          >
            <option value="" disabled {% unless form.return_exchange_type %}selected{% endunless %}>
              Select an option
            </option>
            <option value="Return" {% if form.return_exchange_type == 'Return' %}selected{% endif %}>
              Return
            </option>
            <option value="Exchange" {% if form.return_exchange_type == 'Exchange' %}selected{% endif %}>
              Exchange
            </option>
          </select>
          {%- if form.errors contains 'return_exchange_type' -%}
            <div id="ai-return-exchange-error-{{ ai_gen_id }}" class="ai-contact-form__field-error-{{ ai_gen_id }}">
              Please select return or exchange
            </div>
          {%- endif -%}
        </div>
      </div>

      <div class="ai-contact-form__row-{{ ai_gen_id }} ai-contact-form__row-{{ ai_gen_id }}--single">
        <div class="ai-contact-form__field-{{ ai_gen_id }}">
          <label for="ai-reason-{{ ai_gen_id }}" class="ai-contact-form__label-{{ ai_gen_id }}">
            Reason for Return/Exchange *
          </label>
          <textarea
            id="ai-reason-{{ ai_gen_id }}"
            name="contact[reason]"
            class="ai-contact-form__textarea-{{ ai_gen_id }}"
            required
            placeholder="Please describe the reason for your return or exchange request..."
            {% if form.errors contains 'reason' %}
              aria-invalid="true"
              aria-describedby="ai-reason-error-{{ ai_gen_id }}"
            {% endif %}
          >{{ form.reason }}</textarea>
          {%- if form.errors contains 'reason' -%}
            <div id="ai-reason-error-{{ ai_gen_id }}" class="ai-contact-form__field-error-{{ ai_gen_id }}">
              Reason is required
            </div>
          {%- endif -%}
        </div>
      </div>

      <button type="submit" class="ai-contact-form__button-{{ ai_gen_id }}">
        {{ block.settings.button_text }}
      </button>

      {%- if form.posted_successfully? -%}
        <div class="ai-contact-form__success-{{ ai_gen_id }}">
          {{ block.settings.success_message }}
        </div>
      {%- endif -%}

      {%- if form.errors -%}
        <div class="ai-contact-form__error-{{ ai_gen_id }}">
          {{ block.settings.error_message }}
        </div>
      {%- endif -%}
    </div>
  {%- endform -%}
</div>

{% schema %}
{
  "name": "Return/Exchange Form",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Form heading",
      "default": "Return/Exchange Request"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Submit Request"
    },
    {
      "type": "text",
      "id": "success_message",
      "label": "Success message",
      "default": "Thank you! Your return/exchange request has been submitted successfully."
    },
    {
      "type": "text",
      "id": "error_message",
      "label": "Error message",
      "default": "Please correct the errors above and try again."
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "input_background",
      "label": "Input background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "input_text_color",
      "label": "Input text color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "input_border_color",
      "label": "Input border color",
      "default": "#cccccc"
    },
    {
      "type": "color",
      "id": "input_focus_border_color",
      "label": "Input focus border color",
      "default": "#000f9f"
    },
    {
      "type": "color",
      "id": "input_hover_background",
      "label": "Input hover background",
      "default": "#f9f9f9"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button color",
      "default": "#000f9f"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_color",
      "label": "Button hover color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "success_color",
      "label": "Success text color",
      "default": "#008060"
    },
    {
      "type": "color",
      "id": "success_background",
      "label": "Success background color",
      "default": "#d4edda"
    },
    {
      "type": "color",
      "id": "error_color",
      "label": "Error text color",
      "default": "#D82C0D"
    },
    {
      "type": "color",
      "id": "error_background",
      "label": "Error background color",
      "default": "#f8d7da"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 16,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 32
    },
    {
      "type": "range",
      "id": "label_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Label size",
      "default": 14
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "range",
      "id": "input_border_width",
      "min": 1,
      "max": 4,
      "step": 1,
      "unit": "px",
      "label": "Input border width",
      "default": 1
    },
    {
      "type": "range",
      "id": "input_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Input border radius",
      "default": 4
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Button border radius",
      "default": 4
    }
  ],
  "presets": [
    {
      "name": "Return/Exchange Form"
    }
  ]
}
{% endschema %}